<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.9.0/metricsgraphics.min.css"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.9.0/metricsgraphics.min.js"></script>

<div id="charts"></div>
<script>
  fetch(`/dashboard/stats/stats.json`)
    .then((response) => response.json())
    .then((charts) => {
      charts.forEach((chart) => {
        const chartNode = document.createElement("div");
        document.getElementById("charts").appendChild(chartNode);

        const data = chart.data.map((item) => {
          return {
            date: new Date(item.date),
            value: item.value * 5000,
          };
        });

        MG.data_graphic({
          data,
          chart_type: "line",
          interpolate: "step",
          top: 100,
          width: 1000,
          height: 400,
          right: 90,
          bottom: 90,
          left: 100,
          target: chartNode,
          y_label: chart.label,
          yAxis: {
            extendedTicks: true,
          },
        });
      });
    });
</script>
